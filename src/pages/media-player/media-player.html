<!--
  Generated template for the MediaPlayer page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <button ion-button menuToggle>
      <ion-icon class="white-text" name="menu"></ion-icon>
    </button>
        <ion-title>
            <h2 class="white-text">MediaFile</h2>
        </ion-title>
        <button ion-button class="profilebutton" id="dontshow" (click)="getToProfile()">
        <ion-icon name="person"></ion-icon>
        </button>

        <button ion-button login class="loginbutton" id="show" (click)=getToLogin()>
          <ion-icon name="log-in"></ion-icon>
        </button>

        <button ion-button login class="logoutbutton" id="dontshow" (click)=logout()>
          <ion-icon name="log-out"></ion-icon>
        </button>
    </ion-navbar>
</ion-header>


<ion-content padding>
    <div *ngIf="file && user && favorite">
        <h3>{{ file.title }}</h3>
        <img *ngIf="file.media_type == 'image'" [alt]="file.title" [src]='url + file.filename' />
        <audio *ngIf="file.media_type == 'audio'" controls>
            <source [src]='url + file.filename' [type]="file.mime_type"> Your browser does not support the audio element.
        </audio>
        <video *ngIf="file.media_type == 'video'" width="320" height="240" controls>
            <source [src]='url + file.filename' type="file.mime_type"> Your browser does not support the video tag.
        </video>

        <p>Description: {{ file.description }}</p>
        <p>Username: {{ user.username }}</p>
        <p>File size: {{ file.filesize }}</p>



        <button *ngIf="!likes" (click)="likeMedia()" ion-button icon-left clear small>
            <ion-icon class="thumb-button" name="thumbs-up" ></ion-icon>
            <div class="thumb-button">Likes {{ favorite.length }}</div>
        </button>

        <button *ngIf="likes" (click)="dislikeMedia()" ion-button icon-left clear small>
            <ion-icon class="thumb-button" name="thumbs-down" ></ion-icon>
            <div class="thumb-button">Likes {{ favorite.length }}</div>
        </button>

        <ion-item>
            <ion-label>Rating, ratio </ion-label>
            <ion-range min="1" max="5" step="1" snaps="true" [(ngModel)]="Rating" color="secondary" pin="true">
                <ion-label range-left>1</ion-label>
                <ion-label range-right>5</ion-label>
            </ion-range>
        </ion-item>
    </div>

    <ion-list>
        <ion-list-header>
            Comments
        </ion-list-header>
        <ion-item *ngFor="let comment of comments">
            <h2>{{comment.username}} </h2>
            <p class="comment-time">{{comment.comment}}</p>
            <p class="comment-time">{{comment.time_added}}</p>
        </ion-item>

    </ion-list>


    <form #commentForm="ngForm" (ngSubmit)="postComment(commentForm.value)" (ngSubmit)="onSubmit()">

        <ion-list inset>

            <ion-item>
                <ion-label floating>Comment</ion-label>
                <ion-input style="color: white" type="text" name="comment" [(ngModel)]="commentCredentials.comment" required></ion-input>
            </ion-item>


            <button ion-button>Comment</button>

        </ion-list>

    </form>



</ion-content>